<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>阮铭泽工具箱</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --card-bg: #ffffff;
            --body-bg: #f5f7fa;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
            --radius: 16px;
            --header-height: 70px;
        }

        .dark-mode {
            --primary-color: #5e72e4;
            --card-bg: #1e1e2d;
            --body-bg: #121220;
            --dark-color: #f0f2f5;
            --light-color: #1a1a2e;
            --shadow: 0 4px 16px rgba(0,0,0,0.4);
        }

        body {
            background-color: var(--body-bg);
            color: var(--dark-color);
            min-height: 100vh;
            transition: background-color 0.3s;
            padding-top: var(--header-height);
        }
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            z-index: 100;
            transition: transform 0.3s;
        }

        header.hidden {
            transform: translateY(-100%);
        }

        .tabs {
            display: flex;
            height: 100%;
            padding: 0 20px;
            overflow-x: auto;
            gap: 10px;
        }

        .tab-btn {
            height: 100%;
            padding: 0 20px;
            display: flex;
            align-items: center;
            white-space: nowrap;
            color: var(--dark-color);
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
            position: relative;
        }

        .tab-btn.active {
            color: var(--primary-color);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary-color);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-3px);
        }

        .card-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-color);
        }
        /* 天气卡片样式 */
        .city-selector {
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--dark-color);
            font-size: 1rem;
            margin-bottom: 20px;
            width: 100%;
            max-width: 250px;
        }

        .weather-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .weather-item {
            padding: 15px;
            border-radius: 10px;
            background: rgba(67,97,238,0.05);
            text-align: center;
        }

        .temp {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .weather-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin: 5px 0;
        }
        /* 更新公告样式 */
        .update-item {
            margin-bottom: 15px;
            padding: 15px;
            border-left: 3px solid var(--primary-color);
            background: rgba(67,97,238,0.03);
            border-radius: 0 8px 8px 0;
        }

        .update-date {
            font-size: 0.85rem;
            color: var(--dark-color);
            opacity: 0.7;
            margin-bottom: 5px;
        }
        /* 系统知识样式 */
        .website-card {
            padding: 20px;
            background: rgba(67,97,238,0.03);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--dark-color);
            transition: all 0.3s;
        }

        .website-card:hover {
            background: rgba(67,97,238,0.08);
            transform: translateY(-3px);
        }

        .website-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .search-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border-radius: 30px;
            border: 1px solid rgba(67,97,238,0.3);
            background: var(--card-bg);
            color: var(--dark-color);
            font-size: 1rem;
        }
        /* 计算器样式 */
        .calculator {
            max-width: 320px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .calc-display {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(67,97,238,0.2);
            border-radius: 8px;
            background: rgba(67,97,238,0.02);
            font-size: 1.8rem;
            text-align: right;
            color: var(--dark-color);
        }

        .calc-keys {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .calc-key {
            padding: 15px;
            border: none;
            border-radius: 8px;
            background: rgba(67,97,238,0.05);
            color: var(--dark-color);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calc-key:hover {
            background: rgba(67,97,238,0.15);
        }

        .operator {
            background: rgba(67,97,238,0.1);
        }

        .equal {
            background: var(--primary-color);
            color: white;
        }
        /* 设置页样式 */
        .setting-card {
            padding: 20px;
            border-radius: var(--radius);
            background: var(--card-bg);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .setting-option {
            margin-bottom: 20px;
        }

        .setting-label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .setting-label i {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(67,97,238,0.3);
            background: var(--card-bg);
            color: var(--dark-color);
        }
        .easter-btn {
            padding: 15px 30px;
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px auto;
            transition: transform 0.3s;
        }

        .easter-btn:hover {
            transform: scale(1.05);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        .crazy-mode {
            animation: shake 0.1s infinite;
        }
        @media (max-width: 768px) {
            .weather-info {
                grid-template-columns: 1fr;
            }
            
            .editors-container {
                grid-template-columns: 1fr;
            }
            
            .websites-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <header id="mainHeader">
        <div class="tabs">
            <button class="tab-btn active" data-tab="home">
                <i class="fas fa-home"></i>
                <span data-translate="home">主页</span>
            </button>
            <button class="tab-btn" data-tab="code">
                <i class="fas fa-code"></i>
                <span data-translate="programming">编程工具</span>
            </button>
            <button class="tab-btn" data-tab="knowledge">
                <i class="fas fa-book"></i>
                <span data-translate="knowledge">系统知识</span>
            </button>
            <button class="tab-btn" data-tab="tools">
                <i class="fas fa-tools"></i>
                <span data-translate="tools">实用工具</span>
            </button>
            <button class="tab-btn" data-tab="settings">
                <i class="fas fa-cog"></i>
                <span data-translate="settings">设置</span>
            </button>
        </div>
    </header>

    <div class="container">
        <!-- 主页 -->
        <div id="home" class="tab-content active">
            <!-- 天气卡片 -->
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-cloud-sun"></i>
                    <span data-translate="weather">天气预报</span>
                </div>
                <select class="city-selector" id="citySelector">
                    <option value="beijing">北京</option>
                    <option value="shanghai">上海</option>
                    <option value="guangzhou">广州</option>
                </select>
                
                <div class="weather-info">
                    <div class="weather-item">
                        <div class="temp">25°C</div>
                        <i class="fas fa-sun weather-icon"></i>
                        <div data-translate="sunny">晴</div>
                    </div>
                    <div class="weather-item">
                        <div class="setting-label">
                            <i class="fas fa-wind"></i>
                            <span data-translate="wind">风速</span>: 3.2 m/s
                        </div>
                        <div class="setting-label">
                            <i class="fas fa-tint"></i>
                            <span data-translate="humidity">湿度</span>: 65%
                        </div>
                        <div class="setting-label">
                            <i class="fas fa-temperature-low"></i>
                            <span data-translate="feelsLike">体感</span>: 27°C
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Windows更新公告 -->
            <div class="card">
                <div class="card-title">
                    <i class="fab fa-windows"></i>
                    <span data-translate="updates">Windows更新公告</span>
                </div>
                
                <div class="update-item">
                    <div class="update-date">2023-08-15 | <span data-translate="preview">预览版</span></div>
                    <h4>Windows 11 Insider Preview Build 23475</h4>
                    <p data-translate="update1">此版本引入了新的任务栏搜索框样式，改进了文件资源管理器，并修复了多个已知问题...</p>
                </div>
                
                <div class="update-item">
                    <div class="update-date">2023-08-08 | <span data-translate="preview">预览版</span></div>
                    <h4>Windows 11 Insider Preview Build 23471</h4>
                    <p data-translate="update2">本次更新为小工具板带来了新改进，优化了游戏性能，并修复了多显示器环境下的问题...</p>
                </div>
            </div>
        </div>
        <!-- 编程工具页 -->
        <div id="code" class="tab-content">
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-laptop-code"></i>
                    <span data-translate="onlineEditors">在线编辑器</span>
                </div>
                
                <div class="editors-container">
                    <a href="https://turbowarp.org/editor" target="_blank" class="editor-card">
                        <i class="fab fa-codepen editor-icon"></i>
                        <div class="editor-title" data-translate="scratch">Scratch 编辑器</div>
                        <p data-translate="scratchDesc">可视化编程环境，适合初学者学习编程概念</p>
                    </a>
                    
                    <a href="https://www.online-python.com/" target="_blank" class="editor-card">
                        <i class="fab fa-python editor-icon"></i>
                        <div class="editor-title">Python 编辑器</div>
                        <p data-translate="pythonDesc">强大的Python在线编辑器和执行环境</p>
                    </a>
                    
                    <a href="https://www.bc-cn.net/run/" target="_blank" class="editor-card">
                        <i class="fas fa-file-code editor-icon"></i>
                        <div class="editor-title" data-translate="multilang">多语言编程环境</div>
                        <p data-translate="multilangDesc">支持C, C++, Java, JavaScript等语言的在线编辑器</p>
                    </a>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-graduation-cap"></i>
                    <span data-translate="resources">编程学习资源</span>
                </div>
                
                <div class="websites-container">
                    <a href="https://codinghou.cn/" target="_blank" class="website-card">
                        <i class="fas fa-school website-icon"></i>
                        <div data-translate="codinghou">编程猴教程</div>
                    </a>
                    
                    <a href="https://www.runoob.com/" target="_blank" class="website-card">
                        <i class="fas fa-book website-icon"></i>
                        <div data-translate="runoob">菜鸟教程</div>
                    </a>
                </div>
            </div>
        </div>
        <!-- 系统知识页 -->
        <div id="knowledge" class="tab-content">
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-server"></i>
                    <span data-translate="systemResources">系统知识资源</span>
                </div>
                
                <div class="websites-container">
                    <a href="https://learn.microsoft.com/zh-cn/" target="_blank" class="website-card">
                        <i class="fab fa-microsoft website-icon"></i>
                        <div data-translate="microsoftLearn">Microsoft Learn</div>
                    </a>
                    
                    <a href="https://www.ithaoge.cn/" target="_blank" class="website-card">
                        <i class="fas fa-laptop website-icon"></i>
                        <div data-translate="haoge">IT豪哥教程网</div>
                    </a>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-search"></i>
                    <span data-translate="knowledgeSearch">系统知识搜索</span>
                </div>
                
                <div class="search-container">
                    <input type="text" class="search-input" 
                           data-placeholder="searchPlaceholder" 
                           placeholder="输入要搜索的系统知识关键词...">
                    <button class="easter-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                        <span data-translate="search">搜索</span>
                    </button>
                </div>
                
                <div id="searchResults" class="update-item" style="margin-top:20px;min-height:80px;display:flex;align-items:center;justify-content:center;">
                    <p><span data-translate="enterKeywords">请输入关键词查看搜索结果</span></p>
                </div>
            </div>
        </div>
        <!-- 实用工具页 -->
        <div id="tools" class="tab-content">
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-calculator"></i>
                    <span data-translate="calculator">科学计算器</span>
                </div>
                
                <div class="calculator">
                    <input type="text" class="calc-display" id="display" value="0" readonly>
                    <div class="calc-keys">
                        <button class="calc-key" data-action="clear">C</button>
                        <button class="calc-key" data-action="backspace">CE</button>
                        <button class="calc-key operator" data-action="percent">%</button>
                        <button class="calc-key operator" data-action="divide">/</button>
                        
                        <button class="calc-key" data-number="7">7</button>
                        <button class="calc-key" data-number="8">8</button>
                        <button class="calc-key" data-number="9">9</button>
                        <button class="calc-key operator" data-action="multiply">×</button>
                        
                        <button class="calc-key" data-number="4">4</button>
                        <button class="calc-key" data-number="5">5</button>
                        <button class="calc-key" data-number="6">6</button>
                        <button class="calc-key operator" data-action="subtract">-</button>
                        
                        <button class="calc-key" data-number="1">1</button>
                        <button class="calc-key" data-number="2">2</button>
                        <button class="calc-key" data-number="3">3</button>
                        <button class="calc-key operator" data-action="add">+</button>
                        
                        <button class="calc-key" data-action="negate">+/-</button>
                        <button class="calc-key" data-number="0">0</button>
                        <button class="calc-key" data-action="decimal">.</button>
                        <button class="calc-key equal" data-action="equal">=</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-gamepad"></i>
                    <span data-translate="moyu">摸鱼推荐</span>
                </div>
                
                <div class="websites-container">
                    <a href="https://moyu.games/" target="_blank" class="website-card">
                        <i class="fas fa-dice website-icon"></i>
                        <div data-translate="moyuGames">摸鱼小游戏</div>
                        <p style="margin-top:10px;font-size:0.9rem;opacity:0.8;" data-translate="moyuDesc">有趣的小游戏合集，休闲放松</p>
                    </a>
                </div>
            </div>
        </div>
        <!-- 设置页 -->
        <div id="settings" class="tab-content">
            <div class="setting-card">
                <div class="setting-option">
                    <div class="setting-label">
                        <i class="fas fa-palette"></i>
                        <span data-translate="theme">主题模式</span>
                    </div>
                    <select class="select" id="themeSelect">
                        <option value="light" data-translate="lightTheme">浅色模式</option>
                        <option value="dark" data-translate="darkTheme">深色模式</option>
                    </select>
                </div>
            </div>
            
            <div class="setting-card">
                <div class="setting-option">
                    <div class="setting-label">
                        <i class="fas fa-globe"></i>
                        <span data-translate="language">语言设置</span>
                    </div>
                    <select class="select" id="languageSelect">
                        <option value="zh" data-translate="chinese">简体中文</option>
                        <option value="en" data-translate="english">English</option>
                    </select>
                </div>
            </div>
            
            <div class="setting-card">
                <div style="text-align:center;padding:20px 0;">
                    <button class="easter-btn" id="easterEggBtn">
                        <i class="fas fa-gift"></i>
                        <span data-translate="easterEgg">彩蛋按钮（点三次）</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // 语言翻译对照
        const translations = {
            zh: {
                "home": "主页",
                "programming": "编程工具",
                "knowledge": "系统知识",
                "tools": "实用工具",
                "settings": "设置",
                "weather": "天气预报",
                "wind": "风速",
                "humidity": "湿度",
                "feelsLike": "体感",
                "updates": "Windows更新公告",
                "preview": "预览版",
                "update1": "此版本引入了新的任务栏搜索框样式，改进了文件资源管理器，并修复了多个已知问题...",
                "update2": "本次更新为小工具板带来了新改进，优化了游戏性能，并修复了多显示器环境下的问题...",
                "onlineEditors": "在线编辑器",
                "scratch": "Scratch 编辑器",
                "scratchDesc": "可视化编程环境，适合初学者学习编程概念",
                "pythonDesc": "强大的Python在线编辑器和执行环境",
                "multilang": "多语言编程环境",
                "multilangDesc": "支持C, C++, Java, JavaScript等语言的在线编辑器",
                "resources": "编程学习资源",
                "codinghou": "编程猴教程",
                "runoob": "菜鸟教程",
                "systemResources": "系统知识资源",
                "microsoftLearn": "Microsoft Learn",
                "haoge": "IT豪哥教程网",
                "knowledgeSearch": "系统知识搜索",
                "searchPlaceholder": "输入要搜索的系统知识关键词...",
                "search": "搜索",
                "enterKeywords": "请输入关键词查看搜索结果",
                "resultTitle": "搜索结果",
                "resultText": "关于'%s'的知识点：这是系统知识的具体内容示例...",
                "calculator": "科学计算器",
                "moyu": "摸鱼推荐",
                "moyuGames": "摸鱼小游戏",
                "moyuDesc": "有趣的小游戏合集，休闲放松",
                "theme": "主题模式",
                "lightTheme": "浅色模式",
                "darkTheme": "深色模式",
                "language": "语言设置",
                "chinese": "简体中文",
                "english": "English",
                "easterEgg": "彩蛋按钮（点三次）"
            },
            en: {
                "home": "Home",
                "programming": "Programming Tools",
                "knowledge": "System Knowledge",
                "tools": "Utilities",
                "settings": "Settings",
                "weather": "Weather Forecast",
                "wind": "Wind",
                "humidity": "Humidity",
                "feelsLike": "Feels Like",
                "updates": "Windows Updates",
                "preview": "Preview",
                "update1": "This build introduces a new taskbar search box style, improves File Explorer, and fixes several known issues...",
                "update2": "This update brings improvements to the widgets board, optimizes gaming performance, and fixes issues in multi-monitor environments...",
                "onlineEditors": "Online Editors",
                "scratch": "Scratch Editor",
                "scratchDesc": "Visual programming environment for beginners",
                "pythonDesc": "Powerful online Python editor and execution environment",
                "multilang": "Multi-Language Editor",
                "multilangDesc": "Online editor supporting C, C++, Java, JavaScript and more",
                "resources": "Learning Resources",
                "codinghou": "Coding Hou",
                "runoob": "Runoob Tutorials",
                "systemResources": "System Knowledge Resources",
                "microsoftLearn": "Microsoft Learn",
                "haoge": "IT HaoGe",
                "knowledgeSearch": "Knowledge Search",
                "searchPlaceholder": "Enter system knowledge keywords...",
                "search": "Search",
                "enterKeywords": "Please enter keywords to view results",
                "resultTitle": "Search Results",
                "resultText": "About '%s': This is sample content for the system knowledge...",
                "calculator": "Calculator",
                "moyu": "Relaxation",
                "moyuGames": "Leisure Games",
                "moyuDesc": "Collection of fun mini-games for relaxation",
                "theme": "Theme",
                "lightTheme": "Light Mode",
                "darkTheme": "Dark Mode",
                "language": "Language",
                "chinese": "Chinese",
                "english": "English",
                "easterEgg": "Easter Egg (Click Three Times)"
            }
        };
        // 初始化应用状态
        let easterClickCount = 0;
        let currentTheme = localStorage.getItem('theme') || 'light';
        let currentLang = localStorage.getItem('language') || 'zh';
        
        // DOM元素引用
        const mainHeader = document.getElementById('mainHeader');
        const tabContents = document.querySelectorAll('.tab-content');
        const tabButtons = document.querySelectorAll('.tab-btn');
        const themeSelect = document.getElementById('themeSelect');
        const languageSelect = document.getElementById('languageSelect');
        const searchBtn = document.getElementById('searchBtn');
        const easterEggBtn = document.getElementById('easterEggBtn');
        const display = document.getElementById('display');
        
        // 初始化应用
        function initApp() {
            // 加载保存的设置
            applyTheme(currentTheme);
            applyLanguage(currentLang);
            
            // 设置UI控件状态
            themeSelect.value = currentTheme;
            languageSelect.value = currentLang;
            
            // 设置活动标签
            setActiveTab('home');
            
            // 设置计算器事件
            setupCalculator();
            
            // 设置滚动事件（头部隐藏）
            setupScrollHandler();
            
            // 绑定事件
            bindEvents();
        }
        
        // 应用主题
        function applyTheme(theme) {
            document.body.classList.toggle('dark-mode', theme === 'dark');
            localStorage.setItem('theme', theme);
        }
        
        // 应用语言
        function applyLanguage(lang) {
            // 更新所有带翻译的元素
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            // 更新placeholder
            document.querySelectorAll('[data-placeholder]').forEach(el => {
                const key = el.getAttribute('data-placeholder');
                if (translations[lang][key]) {
                    el.placeholder = translations[lang][key];
                }
            });
            
            // 保存语言设置
            localStorage.setItem('language', lang);
        }
        // 设置活动标签
        function setActiveTab(tabId) {
            // 更新标签按钮状态
            tabButtons.forEach(btn => {
                const isActive = btn.getAttribute('data-tab') === tabId;
                btn.classList.toggle('active', isActive);
            });
            
            // 更新内容显示
            tabContents.forEach(content => {
                const isActive = content.id === tabId;
                content.classList.toggle('active', isActive);
            });
        }
        
        // 设置计算器逻辑
        function setupCalculator() {
            const keys = document.querySelectorAll('.calc-key');
            let currentValue = '0';
            let previousValue = '';
            let operator = null;
            let shouldReset = false;
            
            function updateDisplay() {
                display.value = currentValue;
            }
            
            keys.forEach(key => {
                key.addEventListener('click', () => {
                    const action = key.getAttribute('data-action');
                    const number = key.getAttribute('data-number');
                    
                    if (number) {
                        handleNumber(number);
                    } else if (action) {
                        handleAction(action);
                    }
                    
                    updateDisplay();
                });
            });
            
            function handleNumber(num) {
                if (currentValue === '0' || shouldReset) {
                    currentValue = num;
                    shouldReset = false;
                } else {
                    currentValue += num;
                }
            }
            
            function handleAction(action) {
                switch (action) {
                    case 'clear':
                        currentValue = '0';
                        previousValue = '';
                        operator = null;
                        break;
                    case 'backspace':
                        currentValue = currentValue.length > 1 ? currentValue.slice(0, -1) : '0';
                        break;
                    case 'negate':
                        currentValue = String(-parseFloat(currentValue));
                        break;
                    case 'percent':
                        currentValue = String(parseFloat(currentValue) / 100);
                        break;
                    case 'decimal':
                        if (!currentValue.includes('.')) {
                            currentValue += '.';
                        }
                        break;
                    case 'add':
                    case 'subtract':
                    case 'multiply':
                    case 'divide':
                        previousValue = currentValue;
                        operator = action;
                        shouldReset = true;
                        break;
                    case 'equal':
                        if (operator && previousValue) {
                            currentValue = String(calculate(parseFloat(previousValue), parseFloat(currentValue), operator));
                            operator = null;
                        }
                        break;
                }
            }
            
            function calculate(a, b, op) {
                switch (op) {
                    case 'add': return a + b;
                    case 'subtract': return a - b;
                    case 'multiply': return a * b;
                    case 'divide': return a / b;
                    default: return b;
                }
            }
            
            updateDisplay();
        }
        // 设置滚动事件处理
        function setupScrollHandler() {
            let lastScrollY = window.scrollY;
            
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                
                // 向下滚动时隐藏头部，向上滚动时显示头部
                if (currentScrollY > lastScrollY && currentScrollY > 100) {
                    mainHeader.classList.add('hidden');
                } else {
                    mainHeader.classList.remove('hidden');
                }
                
                lastScrollY = currentScrollY;
            });
        }
        
        // 绑定所有事件
        function bindEvents() {
            // 标签切换
            tabButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.getAttribute('data-tab');
                    setActiveTab(tabId);
                });
            });
            
            // 主题切换
            themeSelect.addEventListener('change', function() {
                applyTheme(this.value);
            });
            
            // 语言切换
            languageSelect.addEventListener('change', function() {
                currentLang = this.value;
                applyLanguage(currentLang);
            });
            
            // 系统知识搜索
            searchBtn.addEventListener('click', function() {
                const input = document.querySelector('.search-input');
                const query = input.value.trim();
                const resultsDiv = document.getElementById('searchResults');
                
                if (query) {
                    // 模拟搜索结果
                    resultsDiv.innerHTML = `
                        <div class="update-date">${translations[currentLang]["resultTitle"]}</div>
                        <h4>${query}</h4>
                        <p>${translations[currentLang]["resultText"].replace('%s', query)}</p>
                    `;
                } else {
                    resultsDiv.innerHTML = `
                        <p>${translations[currentLang]["enterKeywords"]}</p>
                    `;
                }
            });
            
            // 彩蛋功能
            easterEggBtn.addEventListener('click', function() {
                easterClickCount++;
                
                if (easterClickCount === 3) {
                    // 激活彩蛋效果
                    document.body.classList.add('crazy-mode');
                    
                    // 5秒后恢复正常
                    setTimeout(() => {
                        document.body.classList.remove('crazy-mode');
                        easterClickCount = 0;
                    }, 3000);
                }
            });
        }
        
        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
